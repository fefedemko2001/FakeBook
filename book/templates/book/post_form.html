{% extends "book/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
  <div class="content-section">
    <form method="POST" enctype="multipart/form-data" class="dropzone" id="my-dropzone">
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Create / Update Post</legend>
            {{ form|crispy }}
        </fieldset>
        <div class="fallback">
            <input type="file" name="file" multiple />
        </div>
        <div>
            <button class="btn btn-outline-info" type="submit">Post</button>
        </div>
    </form>
  </div>
{% endblock content %}

{% block extra_scripts %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>
  <script>
    Dropzone.options.myDropzone = {
      paramName: "file",
      maxFilesize: 2, // MB
      acceptedFiles: 'image/*',
      init: function() {
        this.on("success", function(file, response) {
          console.log("File uploaded successfully");
        });
      }
    };
  </script>
{% endblock extra_scripts %}
